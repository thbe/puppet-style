### /etc/profile.d/custom.sh
#
# custom shell stuff
#
# managed by Puppet, local changes will be overwritten
#

# Add date and time to history
HISTTIMEFORMAT="%d/%m/%y %T "

# set colors
ROOT_COLOR=31  # red
USER_COLOR=32  # green

# Set hostname
if [ -z $(hostname -f 2> /dev/null) ]; then
  HOST_NAME=$(hostname)
else
  HOST_NAME=$(hostname -f)
fi

# Set prompt
if [ $(id -u) -eq 0 ]; then
  PS1="\[\033[01;${ROOT_COLOR}m\]\u@${HOST_NAME}\[\033[01;34m\] \w\[\033[00m\]$ "
else
  PS1="\[\033[01;${USER_COLOR}m\]\u@${HOST_NAME}\[\033[01;34m\] \w\[\033[00m\]$ "
fi

# User specific aliases and functions
# Global aliases
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'

alias ls='ls --color=auto -CF -h'
alias ll='ls -l'
alias la='ll -a'

alias facter='facter -p'
alias dstat-sum='dstat -cndymlp -N total -D total'
alias netstat-routing='netstat -rn'
alias netstat-listening='netstat -an | grep -E "tcp|udp"'

# User specific aliases
if [ $(id -u) -eq 0 ]; then
  alias mv='mv -i -v'
  alias rm='rm -i -v'
  alias cp='cp -i -v'
  alias up='puppet agent --test'
  alias netstat-prog='netstat -tulpn'
else
  alias mv='mv -v'
  alias rm='rm -v'
  alias cp='cp -v'
  alias root='sudo su -'
  alias svim='sudo vim'
  alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'
  alias excuse='echo `telnet bofh.jeffballard.us 666 2>/dev/null` |grep --color -o "Your excuse is:.*$"'
  alias ssh='ssh -X'
fi
